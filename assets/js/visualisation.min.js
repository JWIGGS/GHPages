const countries=["Algeria","Egypt","Morocco","Namibia","Nigeria","South Africa"];parameters=[{name:"Agricultural Employment",data:"B_1 (Agri employment)",min:1,max:10,value:5,step:.1,valueFunction:a=>a*Math.pow(10,6),displayFunction:a=>a,unit:"billion USD"},{name:"CPI",data:"B_2 (CPI)",min:0,max:5,value:2.5,step:.1,valueFunction:a=>100*Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),displayFunction:a=>Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),unit:"km²"},{name:"Expenditure per Capita",data:"B_3 (Expenditure per capita)",min:0,max:4,value:2,step:.1,valueFunction:a=>100*Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),displayFunction:a=>Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),unit:"km²"},{name:"Land Use per Capita",data:"B_4 (Land Use per capita)",min:0,max:5,value:2.5,step:.1,valueFunction:a=>100*Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),displayFunction:a=>Math.round(Math.round(Math.pow(10,a)/Math.pow(10,Math.ceil(a-3)))*Math.pow(10,Math.ceil(a-3))),unit:"km²"},{name:"GDP per Capita",data:"B_5 (GDP per capita)",min:0,max:50,value:25,step:1,valueFunction:a=>a,displayFunction:a=>a,unit:"%"},{name:"Food Balance per Capita",data:"B_6 (Food balance per capita)",min:0,max:50,value:25,step:1,valueFunction:a=>a,displayFunction:a=>a,unit:"%"}];const ctx=document.getElementById("myChart");function updateChart(){for(var a=0;a<countries.length;a++){let e=data[countries[a]];countriesUndernourishment[a]=parseFloat(e.B_0);for(var t=0;t<parameters.length;t++){let i=parameters[t];countriesUndernourishment[a]+=parseFloat(e[i.data])*i.valueFunction(i.value)}countriesUndernourishment[a]=Math.min(100,Math.max(0,countriesUndernourishment[a]))}chart.update()}countriesUndernourishment=[0,0,0,0,0,0],chart=new Chart(ctx,{type:"bar",responsive:!0,data:{labels:countries,datasets:[{label:"Prevalence of Undernourishment (%)",data:countriesUndernourishment,borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}});for(var i=0;i<parameters.length;i++)thisParam=parameters[i],textMin=$("#min-"+i),textMax=$("#max-"+i),textValue=$("#value-"+i),textMin.html(`${thisParam.displayFunction(thisParam.min)} ${thisParam.unit}`),textMax.html(`${thisParam.displayFunction(thisParam.max)} ${thisParam.unit}`),textValue.html(`${thisParam.displayFunction(thisParam.value)} ${thisParam.unit}`),slider=$("#range-"+i),thisSlider=slider[0],thisSlider.min=thisParam.min,thisSlider.max=thisParam.max,thisSlider.value=thisParam.value,thisSlider.step=thisParam.step,slider.on("change",(function(){updateChart()})),slider.on("input",(function(){let a=parseInt(this.id.split("-")[1]),t=parameters[a],e=$("#value-"+a);t.value=this.value,e.html(`${t.displayFunction(t.value)} ${t.unit}`)}));updateChart();