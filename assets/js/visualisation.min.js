const countries=["Algeria","Egypt","Morocco","Namibia","Nigeria","South Africa"];logValueFunction=function(a){let t=Math.round(Math.round(Math.pow(10,a)/Math.max(1,Math.pow(10,Math.ceil(a-2))))*Math.max(1,Math.pow(10,Math.ceil(a-2))));return console.log(a,t),t},parameters=[{name:"Agricultural Employment",data:"B_1 (Agri employment (%))",min:0,max:75,value:50,step:1,valueFunction:a=>a,displayFunction:a=>a,unit:"%"},{name:"CPI",data:"B_2 (CPI)",min:0,max:2,value:1,step:.01,valueFunction:a=>logValueFunction(a),displayFunction:a=>logValueFunction(a),unit:"CPI"},{name:"Expenditure per Capita",data:"B_3 (Expenditure per capita (US$))",min:0,max:3,value:.5,step:.01,valueFunction:a=>logValueFunction(a),displayFunction:a=>logValueFunction(a),unit:"USD"},{name:"Land Use per Capita",data:"B_4 (Land Use per capita (ha))",min:0,max:3,value:.5,step:.01,valueFunction:a=>logValueFunction(a),displayFunction:a=>logValueFunction(a),unit:"hectares"},{name:"GDP per Capita",data:"B_5 (GDP per capita (US$))",min:0,max:4,value:.5,step:.01,valueFunction:a=>logValueFunction(a),displayFunction:a=>logValueFunction(a),unit:"USD"},{name:"Food Balance per Capita",data:"B_6 (Food imports per capita (kg))",min:0,max:2.5,value:.1,step:.01,valueFunction:a=>logValueFunction(a),displayFunction:a=>logValueFunction(a),unit:"kg"}];const ctx=document.getElementById("myChart");function updateChart(){for(var a=0;a<countries.length;a++){let e=data[countries[a]];countriesUndernourishment[a]=parseFloat(e.B_0);for(var t=0;t<parameters.length;t++){let n=parameters[t];countriesUndernourishment[a]+=parseFloat(e[n.data])*n.valueFunction(n.value)}countriesUndernourishment[a]=Math.min(100,Math.max(0,countriesUndernourishment[a]))}chart.update()}countriesUndernourishment=[0,0,0,0,0,0],chart=new Chart(ctx,{type:"bar",responsive:!0,data:{labels:countries,datasets:[{label:"Prevalence of Undernourishment (%)",data:countriesUndernourishment,borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}});for(var i=0;i<parameters.length;i++)thisParam=parameters[i],textMin=$("#min-"+i),textMax=$("#max-"+i),textValue=$("#value-"+i),textMin.html(`${thisParam.displayFunction(thisParam.min)} ${thisParam.unit}`),textMax.html(`${thisParam.displayFunction(thisParam.max)} ${thisParam.unit}`),textValue.html(`${thisParam.displayFunction(thisParam.value)} ${thisParam.unit}`),slider=$("#range-"+i),thisSlider=slider[0],thisSlider.min=thisParam.min,thisSlider.max=thisParam.max,thisSlider.value=thisParam.value,thisSlider.step=thisParam.step,slider.on("change",(function(){updateChart()})),slider.on("input",(function(){let a=parseInt(this.id.split("-")[1]),t=parameters[a],e=$("#value-"+a);t.value=this.value,e.html(`${t.displayFunction(t.value)} ${t.unit}`)}));updateChart();